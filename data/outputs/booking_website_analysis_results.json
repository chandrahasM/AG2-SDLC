{
  "system_architecture": {
    "pattern": "Microservices or Modular Architecture",
    "confidence": 0.8,
    "components": [],
    "entry_points": [],
    "design_principles": []
  },
  "components": {
    "database": {
      "file": "database.py",
      "functions": [
        "get_db",
        "get_db_session",
        "create_tables",
        "drop_tables",
        "init_db"
      ]
    },
    "main": {
      "file": "main.py",
      "functions": [
        "get_current_user",
        "get_admin_user",
        "root",
        "health_check",
        "create_user"
      ],
      "classes": [
        "UserRole",
        "RoomType",
        "BookingStatus",
        "PaymentStatus",
        "PaymentMethod",
        "UserBase",
        "UserCreate",
        "UserUpdate",
        "UserResponse",
        "HotelBase"
      ]
    },
    "models": {
      "file": "models.py"
    },
    "schemas": {
      "file": "schemas.py"
    },
    "services": {
      "file": "services.py"
    }
  },
  "data_models": [],
  "api_contracts": [],
  "function_registry": [
    {
      "name": "get_db",
      "file_path": "database.py",
      "line_number": 27,
      "is_async": false
    },
    {
      "name": "get_db_session",
      "file_path": "database.py",
      "line_number": 36,
      "is_async": false
    },
    {
      "name": "create_tables",
      "file_path": "database.py",
      "line_number": 48,
      "is_async": false
    },
    {
      "name": "drop_tables",
      "file_path": "database.py",
      "line_number": 53,
      "is_async": false
    },
    {
      "name": "init_db",
      "file_path": "database.py",
      "line_number": 58,
      "is_async": false
    },
    {
      "name": "get_current_user",
      "file_path": "main.py",
      "line_number": 247,
      "is_async": true
    },
    {
      "name": "get_admin_user",
      "file_path": "main.py",
      "line_number": 256,
      "is_async": true
    },
    {
      "name": "root",
      "file_path": "main.py",
      "line_number": 267,
      "is_async": true
    },
    {
      "name": "health_check",
      "file_path": "main.py",
      "line_number": 277,
      "is_async": true
    },
    {
      "name": "create_user",
      "file_path": "main.py",
      "line_number": 287,
      "is_async": true
    },
    {
      "name": "get_current_user_profile",
      "file_path": "main.py",
      "line_number": 307,
      "is_async": true
    },
    {
      "name": "update_current_user_profile",
      "file_path": "main.py",
      "line_number": 322,
      "is_async": true
    },
    {
      "name": "create_hotel",
      "file_path": "main.py",
      "line_number": 343,
      "is_async": true
    },
    {
      "name": "get_hotels",
      "file_path": "main.py",
      "line_number": 367,
      "is_async": true
    },
    {
      "name": "get_hotel",
      "file_path": "main.py",
      "line_number": 379,
      "is_async": true
    },
    {
      "name": "update_hotel",
      "file_path": "main.py",
      "line_number": 405,
      "is_async": true
    },
    {
      "name": "create_room",
      "file_path": "main.py",
      "line_number": 430,
      "is_async": true
    },
    {
      "name": "get_hotel_rooms",
      "file_path": "main.py",
      "line_number": 453,
      "is_async": true
    },
    {
      "name": "get_room",
      "file_path": "main.py",
      "line_number": 464,
      "is_async": true
    },
    {
      "name": "search_hotels",
      "file_path": "main.py",
      "line_number": 484,
      "is_async": true
    },
    {
      "name": "create_booking",
      "file_path": "main.py",
      "line_number": 499,
      "is_async": true
    },
    {
      "name": "get_user_bookings",
      "file_path": "main.py",
      "line_number": 531,
      "is_async": true
    },
    {
      "name": "get_booking",
      "file_path": "main.py",
      "line_number": 541,
      "is_async": true
    },
    {
      "name": "update_booking",
      "file_path": "main.py",
      "line_number": 563,
      "is_async": true
    },
    {
      "name": "cancel_booking",
      "file_path": "main.py",
      "line_number": 586,
      "is_async": true
    },
    {
      "name": "create_payment",
      "file_path": "main.py",
      "line_number": 597,
      "is_async": true
    },
    {
      "name": "get_user_payments",
      "file_path": "main.py",
      "line_number": 616,
      "is_async": true
    },
    {
      "name": "send_welcome_email",
      "file_path": "main.py",
      "line_number": 623,
      "is_async": true
    },
    {
      "name": "send_booking_confirmation",
      "file_path": "main.py",
      "line_number": 628,
      "is_async": true
    },
    {
      "name": "http_exception_handler",
      "file_path": "main.py",
      "line_number": 635,
      "is_async": true
    },
    {
      "name": "general_exception_handler",
      "file_path": "main.py",
      "line_number": 644,
      "is_async": true
    },
    {
      "name": "check_out_after_check_in",
      "file_path": "main.py",
      "line_number": 183,
      "is_async": false
    },
    {
      "name": "validate_password",
      "file_path": "schemas.py",
      "line_number": 58,
      "is_async": false
    },
    {
      "name": "check_out_after_check_in",
      "file_path": "schemas.py",
      "line_number": 157,
      "is_async": false
    },
    {
      "name": "validate_booking_dates",
      "file_path": "schemas.py",
      "line_number": 163,
      "is_async": false
    },
    {
      "name": "validate_price_range",
      "file_path": "schemas.py",
      "line_number": 254,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 20,
      "is_async": false
    },
    {
      "name": "create_user",
      "file_path": "services.py",
      "line_number": 23,
      "is_async": false
    },
    {
      "name": "get_user_by_id",
      "file_path": "services.py",
      "line_number": 42,
      "is_async": false
    },
    {
      "name": "get_user_by_email",
      "file_path": "services.py",
      "line_number": 46,
      "is_async": false
    },
    {
      "name": "update_user",
      "file_path": "services.py",
      "line_number": 50,
      "is_async": false
    },
    {
      "name": "deactivate_user",
      "file_path": "services.py",
      "line_number": 66,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 81,
      "is_async": false
    },
    {
      "name": "create_hotel",
      "file_path": "services.py",
      "line_number": 84,
      "is_async": false
    },
    {
      "name": "get_hotel_by_id",
      "file_path": "services.py",
      "line_number": 106,
      "is_async": false
    },
    {
      "name": "get_hotels_by_city",
      "file_path": "services.py",
      "line_number": 110,
      "is_async": false
    },
    {
      "name": "search_hotels",
      "file_path": "services.py",
      "line_number": 116,
      "is_async": false
    },
    {
      "name": "update_hotel",
      "file_path": "services.py",
      "line_number": 137,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 156,
      "is_async": false
    },
    {
      "name": "create_room",
      "file_path": "services.py",
      "line_number": 159,
      "is_async": false
    },
    {
      "name": "get_room_by_id",
      "file_path": "services.py",
      "line_number": 180,
      "is_async": false
    },
    {
      "name": "get_rooms_by_hotel",
      "file_path": "services.py",
      "line_number": 184,
      "is_async": false
    },
    {
      "name": "check_room_availability",
      "file_path": "services.py",
      "line_number": 193,
      "is_async": false
    },
    {
      "name": "get_available_rooms",
      "file_path": "services.py",
      "line_number": 209,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 229,
      "is_async": false
    },
    {
      "name": "create_booking",
      "file_path": "services.py",
      "line_number": 233,
      "is_async": false
    },
    {
      "name": "get_booking_by_id",
      "file_path": "services.py",
      "line_number": 267,
      "is_async": false
    },
    {
      "name": "get_user_bookings",
      "file_path": "services.py",
      "line_number": 271,
      "is_async": false
    },
    {
      "name": "update_booking_status",
      "file_path": "services.py",
      "line_number": 280,
      "is_async": false
    },
    {
      "name": "cancel_booking",
      "file_path": "services.py",
      "line_number": 292,
      "is_async": false
    },
    {
      "name": "get_booking_revenue",
      "file_path": "services.py",
      "line_number": 296,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 311,
      "is_async": false
    },
    {
      "name": "create_payment",
      "file_path": "services.py",
      "line_number": 314,
      "is_async": false
    },
    {
      "name": "process_payment",
      "file_path": "services.py",
      "line_number": 332,
      "is_async": false
    },
    {
      "name": "get_payment_by_id",
      "file_path": "services.py",
      "line_number": 349,
      "is_async": false
    },
    {
      "name": "get_user_payments",
      "file_path": "services.py",
      "line_number": 353,
      "is_async": false
    },
    {
      "name": "refund_payment",
      "file_path": "services.py",
      "line_number": 359,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 374,
      "is_async": false
    },
    {
      "name": "create_review",
      "file_path": "services.py",
      "line_number": 377,
      "is_async": false
    },
    {
      "name": "get_hotel_reviews",
      "file_path": "services.py",
      "line_number": 396,
      "is_async": false
    },
    {
      "name": "get_hotel_average_rating",
      "file_path": "services.py",
      "line_number": 402,
      "is_async": false
    },
    {
      "name": "__init__",
      "file_path": "services.py",
      "line_number": 413,
      "is_async": false
    },
    {
      "name": "send_notification",
      "file_path": "services.py",
      "line_number": 416,
      "is_async": false
    },
    {
      "name": "get_user_notifications",
      "file_path": "services.py",
      "line_number": 424,
      "is_async": false
    }
  ],
  "class_registry": [
    {
      "name": "UserRole",
      "file_path": "main.py",
      "line_number": 49,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "RoomType",
      "file_path": "main.py",
      "line_number": 55,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "BookingStatus",
      "file_path": "main.py",
      "line_number": 62,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentStatus",
      "file_path": "main.py",
      "line_number": 70,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentMethod",
      "file_path": "main.py",
      "line_number": 76,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "UserBase",
      "file_path": "main.py",
      "line_number": 84,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "UserCreate",
      "file_path": "main.py",
      "line_number": 92,
      "base_classes": [
        "UserBase"
      ]
    },
    {
      "name": "UserUpdate",
      "file_path": "main.py",
      "line_number": 95,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "UserResponse",
      "file_path": "main.py",
      "line_number": 101,
      "base_classes": [
        "UserBase"
      ]
    },
    {
      "name": "HotelBase",
      "file_path": "main.py",
      "line_number": 110,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "HotelCreate",
      "file_path": "main.py",
      "line_number": 121,
      "base_classes": [
        "HotelBase"
      ]
    },
    {
      "name": "HotelUpdate",
      "file_path": "main.py",
      "line_number": 124,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "HotelResponse",
      "file_path": "main.py",
      "line_number": 135,
      "base_classes": [
        "HotelBase"
      ]
    },
    {
      "name": "RoomBase",
      "file_path": "main.py",
      "line_number": 144,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "RoomCreate",
      "file_path": "main.py",
      "line_number": 153,
      "base_classes": [
        "RoomBase"
      ]
    },
    {
      "name": "RoomUpdate",
      "file_path": "main.py",
      "line_number": 156,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "RoomResponse",
      "file_path": "main.py",
      "line_number": 165,
      "base_classes": [
        "RoomBase"
      ]
    },
    {
      "name": "BookingBase",
      "file_path": "main.py",
      "line_number": 175,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "BookingCreate",
      "file_path": "main.py",
      "line_number": 188,
      "base_classes": [
        "BookingBase"
      ]
    },
    {
      "name": "BookingUpdate",
      "file_path": "main.py",
      "line_number": 191,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "BookingResponse",
      "file_path": "main.py",
      "line_number": 198,
      "base_classes": [
        "BookingBase"
      ]
    },
    {
      "name": "PaymentBase",
      "file_path": "main.py",
      "line_number": 210,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "PaymentCreate",
      "file_path": "main.py",
      "line_number": 215,
      "base_classes": [
        "PaymentBase"
      ]
    },
    {
      "name": "PaymentResponse",
      "file_path": "main.py",
      "line_number": 218,
      "base_classes": [
        "PaymentBase"
      ]
    },
    {
      "name": "SearchFilters",
      "file_path": "main.py",
      "line_number": 228,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "SearchResponse",
      "file_path": "main.py",
      "line_number": 239,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "Config",
      "file_path": "main.py",
      "line_number": 107,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "main.py",
      "line_number": 141,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "main.py",
      "line_number": 172,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "main.py",
      "line_number": 207,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "main.py",
      "line_number": 225,
      "base_classes": []
    },
    {
      "name": "UserRole",
      "file_path": "models.py",
      "line_number": 15,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "RoomType",
      "file_path": "models.py",
      "line_number": 21,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "BookingStatus",
      "file_path": "models.py",
      "line_number": 28,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentStatus",
      "file_path": "models.py",
      "line_number": 36,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentMethod",
      "file_path": "models.py",
      "line_number": 42,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "User",
      "file_path": "models.py",
      "line_number": 49,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Hotel",
      "file_path": "models.py",
      "line_number": 68,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Room",
      "file_path": "models.py",
      "line_number": 89,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Booking",
      "file_path": "models.py",
      "line_number": 110,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Payment",
      "file_path": "models.py",
      "line_number": 132,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Review",
      "file_path": "models.py",
      "line_number": 150,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "Notification",
      "file_path": "models.py",
      "line_number": 170,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "AuditLog",
      "file_path": "models.py",
      "line_number": 186,
      "base_classes": [
        "Base"
      ]
    },
    {
      "name": "UserRole",
      "file_path": "schemas.py",
      "line_number": 11,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "RoomType",
      "file_path": "schemas.py",
      "line_number": 17,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "BookingStatus",
      "file_path": "schemas.py",
      "line_number": 24,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentStatus",
      "file_path": "schemas.py",
      "line_number": 32,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "PaymentMethod",
      "file_path": "schemas.py",
      "line_number": 38,
      "base_classes": [
        "str",
        "Enum"
      ]
    },
    {
      "name": "UserBase",
      "file_path": "schemas.py",
      "line_number": 46,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "UserCreate",
      "file_path": "schemas.py",
      "line_number": 54,
      "base_classes": [
        "UserBase"
      ]
    },
    {
      "name": "UserUpdate",
      "file_path": "schemas.py",
      "line_number": 69,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "UserResponse",
      "file_path": "schemas.py",
      "line_number": 75,
      "base_classes": [
        "UserBase"
      ]
    },
    {
      "name": "HotelBase",
      "file_path": "schemas.py",
      "line_number": 84,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "HotelCreate",
      "file_path": "schemas.py",
      "line_number": 95,
      "base_classes": [
        "HotelBase"
      ]
    },
    {
      "name": "HotelUpdate",
      "file_path": "schemas.py",
      "line_number": 98,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "HotelResponse",
      "file_path": "schemas.py",
      "line_number": 109,
      "base_classes": [
        "HotelBase"
      ]
    },
    {
      "name": "RoomBase",
      "file_path": "schemas.py",
      "line_number": 118,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "RoomCreate",
      "file_path": "schemas.py",
      "line_number": 127,
      "base_classes": [
        "RoomBase"
      ]
    },
    {
      "name": "RoomUpdate",
      "file_path": "schemas.py",
      "line_number": 130,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "RoomResponse",
      "file_path": "schemas.py",
      "line_number": 139,
      "base_classes": [
        "RoomBase"
      ]
    },
    {
      "name": "BookingBase",
      "file_path": "schemas.py",
      "line_number": 149,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "BookingCreate",
      "file_path": "schemas.py",
      "line_number": 180,
      "base_classes": [
        "BookingBase"
      ]
    },
    {
      "name": "BookingUpdate",
      "file_path": "schemas.py",
      "line_number": 183,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "BookingResponse",
      "file_path": "schemas.py",
      "line_number": 190,
      "base_classes": [
        "BookingBase"
      ]
    },
    {
      "name": "PaymentBase",
      "file_path": "schemas.py",
      "line_number": 202,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "PaymentCreate",
      "file_path": "schemas.py",
      "line_number": 207,
      "base_classes": [
        "PaymentBase"
      ]
    },
    {
      "name": "PaymentResponse",
      "file_path": "schemas.py",
      "line_number": 210,
      "base_classes": [
        "PaymentBase"
      ]
    },
    {
      "name": "ReviewBase",
      "file_path": "schemas.py",
      "line_number": 220,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "ReviewCreate",
      "file_path": "schemas.py",
      "line_number": 225,
      "base_classes": [
        "ReviewBase"
      ]
    },
    {
      "name": "ReviewResponse",
      "file_path": "schemas.py",
      "line_number": 229,
      "base_classes": [
        "ReviewBase"
      ]
    },
    {
      "name": "SearchFilters",
      "file_path": "schemas.py",
      "line_number": 241,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "SearchResponse",
      "file_path": "schemas.py",
      "line_number": 263,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "PaginationParams",
      "file_path": "schemas.py",
      "line_number": 270,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "ErrorResponse",
      "file_path": "schemas.py",
      "line_number": 274,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "SuccessResponse",
      "file_path": "schemas.py",
      "line_number": 280,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "HealthCheckResponse",
      "file_path": "schemas.py",
      "line_number": 285,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "StatisticsResponse",
      "file_path": "schemas.py",
      "line_number": 292,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "NotificationBase",
      "file_path": "schemas.py",
      "line_number": 301,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "NotificationResponse",
      "file_path": "schemas.py",
      "line_number": 306,
      "base_classes": [
        "NotificationBase"
      ]
    },
    {
      "name": "AuditLogResponse",
      "file_path": "schemas.py",
      "line_number": 316,
      "base_classes": [
        "BaseModel"
      ]
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 81,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 115,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 146,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 199,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 217,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 238,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 313,
      "base_classes": []
    },
    {
      "name": "Config",
      "file_path": "schemas.py",
      "line_number": 328,
      "base_classes": []
    },
    {
      "name": "UserService",
      "file_path": "services.py",
      "line_number": 17,
      "base_classes": []
    },
    {
      "name": "HotelService",
      "file_path": "services.py",
      "line_number": 78,
      "base_classes": []
    },
    {
      "name": "RoomService",
      "file_path": "services.py",
      "line_number": 153,
      "base_classes": []
    },
    {
      "name": "BookingService",
      "file_path": "services.py",
      "line_number": 226,
      "base_classes": []
    },
    {
      "name": "PaymentService",
      "file_path": "services.py",
      "line_number": 308,
      "base_classes": []
    },
    {
      "name": "ReviewService",
      "file_path": "services.py",
      "line_number": 371,
      "base_classes": []
    },
    {
      "name": "NotificationService",
      "file_path": "services.py",
      "line_number": 410,
      "base_classes": []
    }
  ],
  "dependency_graph": {
    "functions": {},
    "classes": {},
    "modules": {},
    "components": {}
  },
  "code_quality_metrics": {
    "total_functions": 74,
    "total_classes": 96,
    "average_complexity": 0.0,
    "max_complexity": 0,
    "documentation_coverage": 0.0,
    "maintainability_index": 50.0,
    "technical_debt_score": 50.0
  },
  "design_recommendations": [
    "Consider implementing more asynchronous functions to improve performance, especially for I/O operations.",
    "Add unit tests for critical functions to ensure reliability and maintainability.",
    "Refactor large files into smaller modules if they grow in complexity to enhance readability and maintainability.",
    "Document the purpose and usage of each function and class to improve code understandability for new developers.",
    "Evaluate the use of type hints for function parameters and return types to improve code clarity and facilitate static analysis."
  ],
  "analysis_timestamp": "2025-09-25T20:10:28.942172"
}